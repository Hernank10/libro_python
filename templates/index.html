<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C.I.P.A.I. - Floridablanca</title>
    <!-- Bootstrap 5.3.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --azul-cipai: #335d97;
            --amarillo-cipai: #ffc107;
            --gris-fondo: #f8f9fa;
        }
        body { font-family: 'Inter', sans-serif; background-color: var(--gris-fondo); }
        
        .hero-section {
            background: linear-gradient(rgba(51, 93, 151, 0.9), rgba(51, 93, 151, 0.9)), 
                        url('https://images.unsplash.com/photo-1523240795612-9a054b0db644?auto=format&fit=crop&w=1200');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 100px 0;
            border-bottom: 6px solid var(--amarillo-cipai);
        }

        .card-img-container {
            height: 160px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #eef2f7;
            border-bottom: 2px solid var(--amarillo-cipai);
        }

        .module-icon { font-size: 4rem; color: var(--azul-cipai); }

        .gramatica-es { border-left: 4px solid var(--azul-cipai); padding-left: 15px; margin-bottom: 10px; background: #fff; border-radius: 4px; padding: 10px; }
        .gramatica-en { border-left: 4px solid var(--amarillo-cipai); padding-left: 15px; font-style: italic; background: #fffdf5; border-radius: 4px; padding: 10px; }

        .leaderboard-card { border: none; border-radius: 15px; }
        .rank-1 { background-color: #fff9e6; font-weight: bold; border-left: 4px solid gold; }
    </style>
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#"><i class="bi bi-mortarboard-fill me-2 text-warning"></i>C.I.P.A.I.</a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#modulos">Módulos</a></li>
                    <li class="nav-item"><a class="nav-link" href="#ranking">Ranking</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contacto">Contacto</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <header class="hero-section text-center">
        <div class="container">
            <h1 class="display-3 fw-bold">C.I.P.A.I. Floridablanca</h1>
            <p class="lead fs-3">Innovación Pedagógica para el Bilingüismo Activo</p>
            <div class="mt-4">
                <span class="badge bg-warning text-dark p-2 px-3 rounded-pill">Santander, Colombia</span>
            </div>
        </div>
    </header>

    <!-- Módulos (API Dinámica) -->
    <main class="container my-5" id="modulos">
        <h2 class="text-center fw-bold mb-5"><i class="bi bi-journal-bookmark-fill text-primary me-2"></i>Módulos de Aprendizaje</h2>
        <div id="app-status" class="text-center my-5">
            <div class="spinner-border text-primary" role="status"></div>
            <p class="mt-2">Obteniendo lecciones de la API...</p>
        </div>
        <div class="row g-4" id="modulos-container"></div>
    </main>

    <!-- Gamificación / Ranking -->
    <section class="bg-white py-5 border-top" id="ranking">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h2 class="fw-bold mb-4"><i class="bi bi-trophy text-warning me-2"></i>Estudiantes Destacados</h2>
                    <div class="table-responsive shadow-sm rounded-4">
                        <table class="table table-hover mb-0">
                            <thead class="table-primary">
                                <tr><th>Rango</th><th>Estudiante</th><th>Progreso</th><th>Puntos</th></tr>
                            </thead>
                            <tbody>
                                <tr class="rank-1"><td>1°</td><td>Luis Mantilla</td><td>100%</td><td>2850</td></tr>
                                <tr><td>2°</td><td>Sofía Prada</td><td>85%</td><td>2100</td></tr>
                                <tr><td>3°</td><td>Andrés Rojas</td><td>70%</td><td>1550</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-md-6 text-center pt-5 pt-md-0">
                    <div class="p-5 bg-light rounded-5 shadow-inner">
                        <i class="bi bi-star-fill text-warning display-1"></i>
                        <h3 class="mt-3">¡Únete al Reto!</h3>
                        <p>Completa los 10 módulos para certificar tu nivel de alfabetización idiomática.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contacto -->
    <section class="container py-5" id="contacto">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
                    <div class="row g-0">
                        <div class="col-md-4 bg-primary text-white p-5 d-flex flex-column justify-content-center text-center">
                            <i class="bi bi-envelope-paper-fill display-3 mb-3"></i>
                            <h4>Soporte</h4>
                            <p>Escríbenos para recibir apoyo pedagógico personalizado.</p>
                        </div>
                        <div class="col-md-8 p-5">
                            <form id="contactForm">
                                <div class="row g-3">
                                    <div class="col-md-6"><input type="text" class="form-control" placeholder="Nombre" required></div>
                                    <div class="col-md-6"><input type="email" class="form-control" placeholder="Email" required></div>
                                    <div class="col-12"><textarea class="form-control" rows="4" placeholder="Tu mensaje..."></textarea></div>
                                    <div class="col-12"><button class="btn btn-primary w-100 py-3 fw-bold rounded-pill">Enviar Consulta</button></div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-dark text-white text-center py-4">
        <p class="mb-0">C.I.P.A.I. © 2024 | Floridablanca Innova</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const iconos = {
            1: 'bi-person-lines-fill', 2: 'bi-body-text', 3: 'bi-magic', 
            4: 'bi-geo-alt-fill', 5: 'bi-megaphone', 6: 'bi-person-walking',
            7: 'bi-arrow-left-right', 8: 'bi-clock-history', 9: 'bi-brush', 10: 'bi-x-circle'
        };

        async function init() {
            try {
                const res = await fetch('/api/modulos');
                const data = await res.json();
                const container = document.getElementById('modulos-container');
                document.getElementById('app-status').style.display = 'none';
                
                container.innerHTML = data.map(m => `
                    <div class="col-md-4">
                        <div class="card h-100 border-0 shadow-sm rounded-4 overflow-hidden">
                            <div class="card-img-container">
                                <i class="bi ${iconos[m.id]} module-icon"></i>
                            </div>
                            <div class="card-body p-4">
                                <h5 class="fw-bold text-primary">${m.titulo}</h5>
                                <div class="gramatica-es small">${m.regla_es}</div>
                                <div class="gramatica-en small">${m.regla_en}</div>
                                <div class="mt-3 p-2 bg-warning bg-opacity-10 rounded">
                                    <small class="fw-bold text-dark">Ejemplo: ${m.ejemplo}</small>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            } catch (err) {
                document.getElementById('app-status').innerHTML = '<p class="text-danger">Error al conectar con la API.</p>';
            }
        }
        init();
    </script>
</body>
</html>
